<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Web Map - MVC Architecture</title>
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  
  <!-- Application CSS -->
  <link rel="stylesheet" href="./assets/css/main.css">
</head>
<body>
  <div id="app">
    <div id="map"></div>
    <div id="controls"></div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- GeoJSON Data (Embedded) -->
  <script>
    window.GEOJSON_DATA = {
      "type": "FeatureCollection",
      "features": [
        {
          "type": "Feature",
          "properties": {
            "name": "Oslo City Hall",
            "city": "Oslo",
            "type": "Government Building",
            "year_built": 1950,
            "population": 634293
          },
          "geometry": {
            "type": "Point",
            "coordinates": [10.7339, 59.9139]
          }
        },
        {
          "type": "Feature",
          "properties": {
            "name": "Bergen Harbor",
            "city": "Bergen",
            "type": "Port",
            "year_built": 1200,
            "population": 285900
          },
          "geometry": {
            "type": "Point",
            "coordinates": [5.3221, 60.3913]
          }
        },
        {
          "type": "Feature",
          "properties": {
            "name": "Stavanger Cathedral",
            "city": "Stavanger",
            "type": "Religious Building",
            "year_built": 1125,
            "population": 144652
          },
          "geometry": {
            "type": "Point",
            "coordinates": [5.7331, 58.9699]
          }
        },
        {
          "type": "Feature",
          "properties": {
            "name": "Nidaros Cathedral",
            "city": "Trondheim",
            "type": "Religious Building",
            "year_built": 1070,
            "population": 193559
          },
          "geometry": {
            "type": "Point",
            "coordinates": [10.3951, 63.4269]
          }
        },
        {
          "type": "Feature",
          "properties": {
            "name": "Tromsø Arctic Cathedral",
            "city": "Tromsø",
            "type": "Religious Building",
            "year_built": 1965,
            "population": 77570
          },
          "geometry": {
            "type": "Point",
            "coordinates": [18.9553, 69.6492]
          }
        },
        {
          "type": "Feature",
          "properties": {
            "name": "Northern Railway",
            "city": "Multiple",
            "type": "Infrastructure",
            "year_built": 1902,
            "population": 0
          },
          "geometry": {
            "type": "LineString",
            "coordinates": [
              [10.7339, 59.9139],
              [11.0905, 60.5925],
              [10.3951, 63.4269],
              [18.9553, 69.6492]
            ]
          }
        }
      ]
    };
  </script>

  <!-- Application Bundle -->
  <script src="./src/app.js"></script>

  <!-- Initialize App -->
  <script>
    // Initialize MVC components
    const mapModel = new MapModel();
    const dataModel = new DataModel();
    const mapView = new MapView('map');
    const uiView = new UIView();
    const appController = new AppController(mapModel, mapView, uiView, dataModel);

    // Setup search panel UI
    uiView.renderSearchPanel(document.getElementById('controls'));

    // Initialize application
    appController.init();

    // Expose globally for debugging
    window.app = { mapModel, dataModel, mapView, uiView, appController };
  </script>
</body>
</html>
